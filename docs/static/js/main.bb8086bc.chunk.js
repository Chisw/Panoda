(window.webpackJsonppano=window.webpackJsonppano||[]).push([[0],{107:function(e,t,n){e.exports=n(163)},112:function(e,t,n){},129:function(e,t){},131:function(e,t){},163:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(17),l=n.n(o),i=(n(112),n(6)),r=n(176),s=n(57),m=n(166),d=n(91),u=n(90),p=n(94),f=n(24),g=n(165),h=n(32);function E(e){var t=e.content,n=e.onClick,a=e.className;return c.a.createElement("span",{className:"bg-green-500 hover:bg-green-600 text-black px-1 rounded-sm inline-block cursor-pointer text-center \n        ".concat(a,"\n      "),style:{minWidth:56},onClick:n},t)}for(var b=n(25),v=n(23),x=n.n(v),N={get:function(e){return JSON.parse(localStorage.getItem(e)||"null")},set:function(e,t){localStorage.setItem(e,JSON.stringify(t))},del:function(e){localStorage.setItem(e,"")}},y=function(e){return"https://mapsv1.bdimg.com/?qt=pdata&sid=".concat(e,"&pos=0_0&z=1")},O=function(e,t,n){return"https://mapsv1.bdimg.com/?qt=pdata&sid=".concat(e,"&pos=").concat(t,"_").concat(n,"&z=4")},S=function(e,t){if(e){var n=e.split("");return n.splice(4,0,"/"),n.splice(7,0,"/"),n.join("")}return h.DateTime.local().toFormat(t||"yyyyMMdd_hhmmss")},P=function(e){var t=document.createElement("input");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("Copy"),document.body.removeChild(t)},w=function(e){if(e){var t;t=e.endsWith("==")?2:e.endsWith("=")?1:0;var n=(e.length/4*3-t)/1e3;return n>=1e3?(n/1024).toFixed(1)+" MB":n.toFixed(1)+" KB"}},I=window.piexif,k=function(e,t){var n,a,c=t.id,o=t.lng,l=t.lat,i=t.date,r=t.rname,s={"0th":(n={},Object(b.a)(n,I.ImageIFD.Artist,"map.baidu.com"),Object(b.a)(n,I.ImageIFD.Software,"Panoda - panoda.jisuowei.com"),Object(b.a)(n,I.ImageIFD.DateTime,S("","yyyy/MM/dd hh:mm:ss")),Object(b.a)(n,I.ImageIFD.ImageDescription,c+"-"+encodeURIComponent(r)),n),Exif:Object(b.a)({},I.ExifIFD.DateTimeOriginal,i),GPS:(a={},Object(b.a)(a,I.GPSIFD.GPSLongitudeRef,o<0?"W":"E"),Object(b.a)(a,I.GPSIFD.GPSLongitude,I.GPSHelper.degToDmsRational(o)),Object(b.a)(a,I.GPSIFD.GPSLatitudeRef,l<0?"S":"N"),Object(b.a)(a,I.GPSIFD.GPSLatitude,I.GPSHelper.degToDmsRational(l)),a)};return I.insert(I.dump(s),e)},C=function(e,t){var n=t.id,a=t.lng,c=t.lat,o={"1id":"PanoID: "+n,"2position":"Position: "+a+(a<0?"W, ":"E, ")+c+(c<0?"S":"N"),"3date":"Date: "+t.date,"4rname":"RoadName: "+t.rname,"5link":"Generated by Panoda - panoda.jisuowei.com"},l=Object(v.values)(Object(v.pick)(o,N.get("PANO_SETTING_WATERMARK").sort())).join("  |  ");e.font="24px font-mono",e.textAlign="left",e.fillStyle="#000",e.fillText(l,20,2021),e.fillStyle="#fff",e.fillText(l,20,2020)},j=[],T=0;T<24;T++)j.push("&nbsp;");var A,L={echo:function(e,t){var n=document.getElementById("cmd");if(n)if("br"!==e){var a=e.length+1,c=j.slice(a).join("")+e,o=t||"",l=document.createElement("p");l.innerHTML=c+"&nbsp;&nbsp;"+o,n.appendChild(l);var i=document.getElementById("cmd-scroll");i&&i.scrollTo({top:1e4,behavior:"smooth"})}else{var r=document.createElement("br");n.appendChild(r)}}},D=/^[0-9]{25}[0-9A-Z]{2}$/,_=/[0-9]{25}[0-9A-Z]{2}/g,R=[0,1,2,3,4,5,6,7,8,9,10,11,12,.01024,.00512,.00256,.00128,64e-5,32e-5,16e-5],F=";(function(){\n  let monitor = document.createElement('textarea');\n  document.body.appendChild(monitor);\n\n  monitor.value = 'Ready, click the direction-guide-button now, double click to copy the value.';\n  monitor.style = \n    `position: fixed; z-index: 999999; top: 80px; left: 20px;\n    width: 210px; height: 320px; padding: 4px; overflow-y: auto;\n    font-family: monospace, consolas; font-size: 12px; text-align: center;\n    color: #3ddc84; background: #0a1d1a; border: 1px solid #0a1d1a; border-radius: 4px;`;\n\n  monitor.onclick = (event) => {event.stopPropagation();}\n  monitor.ondblclick = (event) => {\n    monitor.select();\n    document.execCommand('Copy');\n    alert('Copied')\n  }\n\n  let idList = [];\n  window.onclick = () => {\n    const match = location.href.match(/[0-9]{26}[A-Z]{1}/);\n    const id = match ? match[0] : '';\n    const can = id && !idList.includes(id);\n    if (can) idList.unshift(id);\n\n    monitor.value = idList.join(',\\n') + ',';\n  }\n}());",G=n(175).a.create({position:"top-left"}),B={toast:function(e,t,n,a,c){G.show({message:e,timeout:t,icon:n,intent:a,action:c})},primary:function(e,t,n,a){B.toast(e,t||5e3,n||"console","primary",a)},success:function(e,t,n,a){B.toast(e,t||2e3,n||"tick","success",a)},danger:function(e,t,n,a){B.toast(e,t||3e3,n||"error","danger",a)},warning:function(e,t,n,a){B.toast(e,t||5e3,n||"error","warning",a)}},M=B,W=n(16),z=n(92),H=n.n(z),Z=n(93),V=n.n(Z),K=window,U=K.BMap,q=new U.PanoramaCoverageLayer,Y=new U.PanoramaService,J={parent:{scannerRunning:!1,fetcherRunning:!1},init:function(){(A=new U.Map("map",{enableMapClick:!1})).centerAndZoom(new U.Point(119.52,32.79),12),A.enableScrollWheelZoom(!0),A.setMinZoom(5);var e=new U.NavigationControl({anchor:K.BMAP_ANCHOR_TOP_LEFT,type:K.BMAP_NAVIGATION_CONTROL_LARGE});A.addControl(e),A.addEventListener("tilesloaded",(function(){var e=A.getZoom();J.parent.setZoomLevel(e)}))},clear:function(){A.clearOverlays()},listen:function(e){J.panoCover.show(),A.clearOverlays(),A.removeEventListener("click",J.getPanoIdByClicking),A.removeEventListener("click",J.setAreaSelector),"point"===e?A.addEventListener("click",J.getPanoIdByClicking):"area"===e&&A.addEventListener("click",J.setAreaSelector)},unlisten:function(){J.panoCover.hide(),A.clearOverlays(),A.removeEventListener("click",J.getPanoIdByClicking),A.removeEventListener("click",J.setAreaSelector)},locate:function(){J.parent.setLoading(!0);var e=new U.Geolocation;e.getCurrentPosition((function(t){J.parent.setLoading(!1),0===e.getStatus()?(A.panTo(t.point),M.success("Locate successfully")):M.danger("Locate failed, try later..")}),{enableHighAccuracy:!0})},getPinMarker:function(e){var t={width:18,height:24};return new U.Marker(e,{offset:{width:0,height:-t.height/2},icon:new U.Icon(H.a,t,{imageSize:t})})},getRectMarker:function(e){var t={width:200,height:200};return new U.Marker(e,{draggingCursor:"move",icon:new U.Icon(V.a,t,{imageSize:t})})},getPanoIdByClicking:function(e){var t=e.point,n=t.lng,a=t.lat;J.parent.setLoading(!0),Y.getPanoramaByLocation(new U.Point(n,a),(function(e){A.clearOverlays(),null!==e?J.getPanoInfoByIdAndAppendDom(e.id,(function(e){var t=e.position,n=t.lng,a=t.lat,c=new U.Point(n,a),o=J.getPinMarker(c);if(A.panTo(c),A.addOverlay(o),e.roads){var l=[];Object.values(e.roads).forEach((function(e){l=l.concat(e.map((function(e){return e.id})))})),l=l.filter((function(t){return t!==e.id})),J.parent.setSameRoadPanos(l)}J.parent.setLoading(!1),M.success("Get pano successfully")}),(function(e){e&&M.warning("Get pano ".concat(e," info failed")),J.parent.setLoading(!1)})):(J.parent.setLoading(!1),J.parent.setSameRoadPanos([]),M.danger("No point matched, try again"))}))},getPanoramaByPoint:function(e,t){var n=e.lng,a=e.lat;Y.getPanoramaByLocation(new U.Point(n,a),(function(e){t(e)}))},getPanoInfoByIdAndAppendDom:function(e,t,n){if(e&&D.test(e)){var a=J.parent,c=a.panos,o=a.setPanos;c.map((function(e){return e.id})).includes(e)?(M.warning("Pano ".concat(e," already exist")),n&&n()):Y.getPanoramaById(e,(function(a){if(null!==a){var l=a.id,i=a.position,r=i.lng,s=i.lat,m=a.copyright,d=m.photoDate,u=m.roadName;c.unshift({id:l,lng:r,lat:s,date:S(d),rname:u||"Unnamed Road"});var p=Object(W.a)(c);o(p),t&&t(a)}else n&&n(e)}))}else M.danger("Invalid pano id ".concat(e))},panToPoint:function(e){var t=e.lng,n=e.lat,a=new U.Point(t,n);A.getZoom()<16?A.centerAndZoom(a,16):A.panTo(a),A.clearOverlays(),A.addOverlay(J.getPinMarker(a))},panoCover:{show:function(){A.addTileLayer(q)},hide:function(){A.removeTileLayer(q)}},scanIdsByPoints:function(e,t,n,a){var c=0;!function o(){J.parent.scannerRunning&&setTimeout((function(){c<e.length?J.getPanoramaByPoint(e[c],(function(e){var a=c+1;null!==e?t(e,a):n(a),c++,o()})):a()}),20)}()},importPanosByIdList:function(e,t){J.parent.setLoading(!0);!function n(){e.length?setTimeout((function(){J.getPanoInfoByIdAndAppendDom(e.shift()||"",n,(function(e){e&&M.warning("Get ".concat(e," info failed")),n()}))}),10):(J.parent.setLoading(!1),M.success("Importing finished"),t&&t())}()},importHistoryPanosByIdList:function(e,t){J.parent.setLoading(!0);var n=[];!function t(){e.length?setTimeout((function(){fetch("https://mapsv0.bdimg.com/?qt=sdata&sid=".concat(e.shift()||"")).then((function(e){return e.json()})).then((function(e){var a=(e&&e.content||[{}])[0].TimeLine,c=a?a.filter((function(e){return 0===e.IsCurrent})).map((function(e){return e.ID})):[];n=n.concat(c),t()}))})):(M.success(n.length+" history pano".concat(n.length>1?"s":""," found"),4e3),J.parent.setLoading(!0),J.importPanosByIdList(n))}()},markPoints:function(e){A.clearOverlays(),e.forEach((function(e){var t=e.lng,n=e.lat,a=new U.Point(t,n),c=J.getPinMarker(a);A.addOverlay(c)}))},setAreaSelector:function(e){A.clearOverlays(),J.parent.setAreaCenter(e.point);var t=J.getRectMarker(e.point);A.addOverlay(t),t.enableDragging(),t.addEventListener("dragend",(function(e){J.parent.setAreaCenter(e.point)}))}},Q=J;function X(e){var t=e.isOpen,n=e.onClose,o=e.areaCenter,l=e.zoomLevel,r=o.lng,s=o.lat,m=R[l],d=2.5*m,u=r-d,p=s+d,f=Object(a.useState)(!1),b=Object(i.a)(f,2),v=b[0],N=b[1];Object(a.useEffect)((function(){t&&setTimeout((function(){Q.parent.scannerRunning=!0,y()}),100)}),[t]);var y=function(){L.echo("Scanning Datetime:",h.DateTime.local().toFormat("yyyy/MM/dd hh:mm:ss")),L.echo("Area Center Point:",r.toFixed(14)+", "+s.toFixed(14)),L.echo("Map Zoom Level:",l),L.echo("Level Offect:",m),L.echo("br"),L.echo("Top Left Point:",u.toFixed(14)+", "+p.toFixed(14));for(var e=[],t=0;t<6;t++)for(var n=0;n<6;n++)e.push({lng:u+m*t,lat:p-m*n});L.echo("br"),L.echo(">>","Start computing 6*6 points"),L.echo("br");var a=0;!function t(){setTimeout((function(){var n=e[a];L.echo("Point "+(a+1),n.lng.toFixed(14)+", "+n.lat.toFixed(14)),++a<36?t():(L.echo("br"),L.echo("<<","Computing end"),L.echo("br"),O(e))}),50)}()},O=function(e){L.echo(">>","Start scanning panos"),L.echo("br");var t=[];Q.scanIdsByPoints(e,(function(e,n){t.push(e.id),t=t.concat(e.links.map((function(e){return e.id})));var a=[];e.roads&&Object.values(e.roads).forEach((function(e){a=a.concat(e.map((function(e){return e.id})))})),t=t.concat(a),L.echo("Point ".concat(n,":"),"Scanned ".concat(1+e.links.length+a.length," panos"))}),(function(e){L.echo("Point ".concat(e,":"),"None")}),(function(){var e=x.a.uniq(t),n=t.length,a=e.length,c=n-a;L.echo("br"),L.echo("<<","Scanning end"),L.echo("br"),L.echo(">>","Start printing result"),L.echo("br"),setTimeout((function(){e.forEach((function(e,t){L.echo("Pano "+(t+1)+":",e)})),L.echo("br"),L.echo("Scanned Result:","".concat(n," total, ").concat(c," repeated, ").concat(a," remained.")),L.echo("br"),L.echo("<<","Printing result end"),L.echo("br"),S(e)}),1e3)}))},S=function(e){L.echo(">>","Start importing"),L.echo("br"),L.echo("","Importing ..."),L.echo("br"),Q.parent.setLoading(!0);!function t(){e.length?setTimeout((function(){Q.getPanoInfoByIdAndAppendDom(e.shift()||"",t,t)}),20):(Q.parent.setLoading(!1),M.success("Finished"),L.echo("<<","Importing end"),L.echo("br"),L.echo("br"),L.echo("^_^","Congratulations"))}()};return c.a.createElement("div",null,c.a.createElement(g.a,{position:"bottom",style:{background:"rgba(0,0,0, .8)",right:"50%",marginRight:-200,minWidth:800},isOpen:t,canOutsideClickClose:!1,backdropProps:{style:{background:"rgba(0,0,0, .2)",cursor:"not-allowed"}}},c.a.createElement("div",{className:"absolute top-0 right-0 bottom-0 left-0 text-green-code font-mono text-xs"},c.a.createElement("h3",{className:"px-5 py-3"},c.a.createElement("span",null,"Scanner"),c.a.createElement("span",{className:"float-right"},v?c.a.createElement("span",null,c.a.createElement("span",null,"Are you sure to close?"),c.a.createElement(E,{className:"mx-2",content:"Yes",onClick:function(){Q.parent.scannerRunning=!1,n(),N(!1)}}),c.a.createElement(E,{content:"No",onClick:function(){N(!1)}})):c.a.createElement(E,{content:"Close",onClick:function(){N(!0)}}))),c.a.createElement("div",{id:"cmd-scroll",className:"absolute py-6 border border-dashed border-green-900 overflow-y-scroll",style:{top:40,right:20,bottom:20,left:20}},c.a.createElement("div",null,c.a.createElement("pre",{id:"cmd",className:"font-mono"}))))))}function $(e){var t=e.loading,n=e.panoFrom,o=e.setPanoFrom,l=e.selectWith,r=e.setSelectWith,s=e.sameRoadPanos,g=e.setSameRoadPanos,h=e.areaCenter,E=e.zoomLevel,b=s.length,v=Object(a.useState)(!1),x=Object(i.a)(v,2),N=x[0],y=x[1],O="map"===n&&"point"===l,S="map"===n&&"area"===l;return c.a.createElement("div",{className:"map-select-guider absolute left-50 shadow-lg"},c.a.createElement("div",{className:"guider-top w-full h-8 rounded bg-white overflow-hidden\n          ".concat(O&&b?" expand":"")},c.a.createElement("div",{className:"px-1 w-full h-full flex items-center"},c.a.createElement("div",{className:"text-xs font-mono flex items-center flex-grow leading-none"},c.a.createElement("p",{className:"pl-2"},"Annother ",b," pano",1===b?"":"s"," on this road.")),c.a.createElement(m.a,{round:!0,interactive:!0,minimal:t,className:"text-xs",intent:"primary",onClick:function(){Q.importPanosByIdList(s,(function(){g([])}))}},c.a.createElement("span",{className:"inline-block w-10 text-center"},t?c.a.createElement(d.a,{size:0}):c.a.createElement("span",null,"Import"))))),c.a.createElement("div",{className:"guider-top w-full h-8 rounded bg-white overflow-hidden\n          ".concat(S?" expand":"")},c.a.createElement("div",{className:"px-1 w-full h-full flex items-center"},c.a.createElement("div",{className:"text-xs font-mono flex items-center flex-grow leading-none"},c.a.createElement("p",{className:"text-gray-500 text-right"},"Area",c.a.createElement("br",null),"Center"),c.a.createElement("p",{className:"mx-2",style:{minWidth:128}},h.lng,c.a.createElement("br",null),h.lat),c.a.createElement("p",{className:"text-gray-500 text-right ml-1"},"Zoom",c.a.createElement("br",null),"Level"),c.a.createElement("p",{className:"mx-2 ".concat(E<17?"text-red-600":"")},E)),c.a.createElement(m.a,{interactive:!0,className:"text-xs",intent:"primary",onClick:function(){0!==h.lng?E<17?M.danger("Zoom map to level 17-19."):y(!0):M.danger("Invalid area center point.")}},"Scan"))),c.a.createElement(u.a,{fill:!0},c.a.createElement(p.a,{content:"Locate your position",position:"left"},c.a.createElement(f.b,{icon:"locate",onClick:function(){Q.locate()}})),c.a.createElement(f.b,{className:"px-8",icon:"map-marker",active:"point"===l,onClick:function(){r("point")}},"Point"),c.a.createElement(f.b,{className:"px-8",icon:"widget",active:"area"===l,onClick:function(){r("area")}},"Area"),c.a.createElement(p.a,{content:"Quit",position:"right"},c.a.createElement(f.b,{icon:"cross",intent:"danger",onClick:function(){o("")}}))),c.a.createElement(X,{isOpen:N,onClose:function(){y(!1)},areaCenter:h,zoomLevel:E}))}function ee(e){var t=e.openVideo;return c.a.createElement("div",{className:"pt-4 pb-2"},c.a.createElement("h3",{className:"text-4xl font-mono"},"Panoda",c.a.createElement(u.a,{minimal:!0,className:"float-right mt-2"},c.a.createElement(p.a,{content:"Demo video"},c.a.createElement(f.a,{icon:"video",onClick:t})),c.a.createElement(p.a,{content:"GitHub"},c.a.createElement(f.a,{icon:"git-repo",href:"https://github.com/Chisw/Panoda",target:"_blank"})))),c.a.createElement("h3",{className:"text-xs text-gray-500 font-hairline"},"Fetch Baidu panoramic photo easily!"))}var te=n(167);function ne(e){var t=e.loading;return c.a.createElement("div",{className:"".concat(t?"block":"hidden"," fixed z-50 top-0 right-0 bottom-0 left-0 cursor-wait")},c.a.createElement(te.a,{className:"shadow-lg",intent:"primary"}))}var ae=n(37),ce=n(101),oe=n(102),le=n(172),ie=n(103),re=n(168);function se(){return c.a.createElement(re.a,{icon:"path-search",title:"No Pano Here",description:"Create pano by clicking 'Add' button above"})}var me=n(56),de=n(9);function ue(e){var t=e.index,n=e.pano,a=n.id,o=n.lng,l=n.lat,i=n.date,r=n.rname,s=e.panos,m=e.setPanos,d=e.checkedIds,p=e.setCheckedIds,g=e.shift1,h=e.shift2,E=e.setShift1,b=e.setShift2,v=d.includes(a);return c.a.createElement(me.a,{className:"\n        pano-pano-bar py-3 border-b flex hover:bg-gray-100 m-0 font-mono select-none \n        ".concat(t===g?"bg-gray-300 hover:bg-gray-300":"","\n      "),checked:v,onChange:function(){var e;if(v){var t=d.findIndex((function(e){return e===a}));d.splice(t,1),e=Object(W.a)(d)}else d.push(a),e=Object(W.a)(d);p(e)},onClick:function(e){e.shiftKey?-1===g?E(t):-1===h&&b(t):(E(-1),b(-1))}},c.a.createElement("div",{className:"w-8 flex items-center"},c.a.createElement("span",{className:"text-xs text-gray-700"},t+1)),c.a.createElement("div",{className:"text-none"},c.a.createElement(ae.a,{position:"top-left",interactionKind:"hover",content:c.a.createElement("img",{alt:a,style:{width:300,height:150},src:y(a)})},c.a.createElement("img",{alt:a,className:"pano-preview rounded-sm",src:y(a)}))),c.a.createElement("div",{className:"px-3 leading-snug",style:{width:380}},c.a.createElement("p",{className:"text-xs"},"ID: ",a),c.a.createElement("p",{className:"text-xs text-gray-500"},"Date: ",i,r?c.a.createElement("span",{className:"ml-4"},"Road: ",r):""),c.a.createElement("p",{className:"text-xs text-gray-500"},"Position: ",o+","+l)),c.a.createElement("div",{className:"pano-operation px-2 text-right self-center flex-grow"},c.a.createElement(u.a,{minimal:!0},c.a.createElement(f.b,{icon:"map-marker",onClick:function(){Q.panToPoint({lng:o,lat:l})}}),c.a.createElement(ae.a,{position:"left",content:c.a.createElement("div",{className:"px-4 py-2"},c.a.createElement("p",null,"Delete this pano?",c.a.createElement(f.b,{className:"".concat(de.a.POPOVER_DISMISS," ml-4"),intent:"danger",onClick:function(){var e=s.findIndex((function(e){return e.id===a}));if(-1!==e){s.splice(e,1).reverse();var t=Object(W.a)(s);m(t),Q.clear(),M.success("Pano deleted.")}}},"Yes")))},c.a.createElement(f.b,{icon:"trash",intent:"danger"})))))}function pe(e){var t=e.index,n=e.pano,a=n.id,o=n.lng,l=n.lat,i=n.date,r=n.rname,s=e.panos,m=e.setPanos,d=e.checkedIds,p=e.setCheckedIds,g=e.shift1,h=e.shift2,E=e.setShift1,b=e.setShift2,v=d.includes(a);return c.a.createElement(me.a,{className:"\n        pano-pano-card border mt-6 mr-6 mb-0 ml-0 rounded border-none font-mono \n        ".concat(t===g?"opacity-50":"","\n      "),checked:v,onChange:function(){var e;if(v){var t=d.findIndex((function(e){return e===a}));d.splice(t,1),e=Object(W.a)(d)}else d.push(a),e=Object(W.a)(d);p(e)},onClick:function(e){e.shiftKey?-1===g?E(t):-1===h&&b(t):(E(-1),b(-1))}},c.a.createElement("img",{alt:a+t,className:"pano-preview absolute top-0 right-0 bottom-0 left-0 rounded z-0 hover:shadow-lg",src:y(a)}),c.a.createElement("div",{className:"px-1 leading-tight absolute right-0 bottom-0 left-0 break-words",style:{textShadow:"0 0 2px rgba(0,0,0, 1),0 0 1px rgba(0,0,0, 1)"}},c.a.createElement("p",{className:"text-xs text-white text-right"},r," ",i,c.a.createElement("br",null),a)),c.a.createElement("div",{className:"pano-operation text-right absolute top-0 right-0 left-0"},c.a.createElement(u.a,null,c.a.createElement(f.b,{icon:"map-marker",onClick:function(){Q.panToPoint({lng:o,lat:l})}}),c.a.createElement(ae.a,{position:"top",content:c.a.createElement("div",{className:"px-4 py-2"},c.a.createElement("p",null,"Delete this pano?",c.a.createElement(f.b,{className:"".concat(de.a.POPOVER_DISMISS," ml-4"),intent:"danger",onClick:function(){var e=s.findIndex((function(e){return e.id===a}));if(-1!==e){s.splice(e,1).reverse();var t=Object(W.a)(s);m(t),Q.clear(),M.success("Pano deleted.")}}},"Yes")))},c.a.createElement(f.b,{icon:"trash",intent:"danger"})))))}var fe=n(98),ge=n(169);function he(e){var t=e.isOpen,n=e.onClose,o=e.setTabId,l=Object(a.useState)(""),r=Object(i.a)(l,2),s=r[0],m=r[1],d=function(e){var t=s.replace(/\n/g,"").split(",").filter((function(e){return""!==e})),a=!1;if(t.forEach((function(e){D.test(e)||(a=!0)})),a){M.danger("Invalid pano id.");var c=t.filter((function(e){return""!==e})).map((function(e){return D.test(e)?e:"!!> ".concat(e," <!!")}));m(c.join(",\n"))}else m(""),n(),e?Q.importHistoryPanosByIdList(Object(v.uniq)(t)):Q.importPanosByIdList(Object(v.uniq)(t))};return c.a.createElement(fe.a,{title:"Add",icon:"text-highlight",canEscapeKeyClose:!1,canOutsideClickClose:!1,isOpen:t,onClose:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){m(""),n()}))},c.a.createElement("div",{className:de.a.DIALOG_BODY},c.a.createElement(ge.a,{className:"w-full",style:{height:"8rem",resize:"none"},intent:"primary",placeholder:"Paste pano id(s) here, separate values by commas",onChange:function(e){m(e.target.value)},value:s})),c.a.createElement("div",{className:de.a.DIALOG_FOOTER},c.a.createElement("div",{className:de.a.DIALOG_FOOTER_ACTIONS},c.a.createElement(f.b,{minimal:!0,className:"text-xs",onClick:function(){n(),o("about")}},"How to get pano id(s)?"),c.a.createElement(p.a,{content:"Search and then import history panos by current ids",position:"bottom"},c.a.createElement(f.b,{disabled:0===s.length,onClick:function(){d(!0)}},"Import history")),c.a.createElement(f.b,{intent:"primary",disabled:0===s.length,onClick:function(){d()}},"Import"))))}var Ee=n(170);function be(e){var t=e.checkedIds,n=e.panos,a=e.setPanos,o=e.isOpen,l=e.onClose;return c.a.createElement(Ee.a,{icon:"trash",intent:"danger",isOpen:o,onClose:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){l()})),cancelButtonText:"Cancel",confirmButtonText:"Yes",onConfirm:function(){var e=[];n.forEach((function(n){t.includes(n.id)||e.push(n)})),a(e),Q.clear(),M.success("Deleted")}},c.a.createElement("p",{className:"text-base text-gray-800"},"Delete",c.a.createElement("span",null," ",t.length," "),"checked pano",1===t.length?"":"s","?"))}var ve=n(171),xe=n(99),Ne=n.n(xe),ye=n(100),Oe=n.n(ye);function Se(){return c.a.createElement("table",{className:"table-grid absolute z-0 top-0 right-0 bottom-0 left-0 w-full text-base text-gray-400 border-collapse bg-gray-100"},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,"1"),c.a.createElement("td",null,"2"),c.a.createElement("td",null,"3"),c.a.createElement("td",null,"4"),c.a.createElement("td",null,"5"),c.a.createElement("td",null,"6"),c.a.createElement("td",null,"7"),c.a.createElement("td",null,"8")),c.a.createElement("tr",null,c.a.createElement("td",null,"9"),c.a.createElement("td",null,"10"),c.a.createElement("td",null,"11"),c.a.createElement("td",null,"12"),c.a.createElement("td",null,"13"),c.a.createElement("td",null,"14"),c.a.createElement("td",null,"15"),c.a.createElement("td",null,"16")),c.a.createElement("tr",null,c.a.createElement("td",null,"17"),c.a.createElement("td",null,"18"),c.a.createElement("td",null,"19"),c.a.createElement("td",null,"20"),c.a.createElement("td",null,"21"),c.a.createElement("td",null,"22"),c.a.createElement("td",null,"23"),c.a.createElement("td",null,"24")),c.a.createElement("tr",null,c.a.createElement("td",null,"25"),c.a.createElement("td",null,"16"),c.a.createElement("td",null,"27"),c.a.createElement("td",null,"28"),c.a.createElement("td",null,"29"),c.a.createElement("td",null,"30"),c.a.createElement("td",null,"31"),c.a.createElement("td",null,"32"))))}function Pe(e){var t=e.panos,n=e.fetchResList,o=e.setFetchResList,l=e.checkedIds,r=e.isOpen,s=e.onClose,d=Object(a.useState)(!1),u=Object(i.a)(d,2),p=u[0],g=u[1],E=Object(a.useState)(0),b=Object(i.a)(E,2),v=b[0],x=b[1],y=Object(a.useState)(0),P=Object(i.a)(y,2),I=P[0],j=P[1],T=Object(a.useState)(0),A=Object(i.a)(T,2),L=A[0],D=A[1],_=Object(a.useState)(!1),R=Object(i.a)(_,2),F=R[0],G=R[1],B=Object(a.useState)(!1),z=Object(i.a)(B,2),H=z[0],Z=z[1],V=Object(a.useState)("-- MB"),K=Object(i.a)(V,2),U=K[0],q=K[1];Object(a.useEffect)((function(){r&&D((new Date).getTime())}),[r]),Object(a.useEffect)((function(){r&&setTimeout((function(){g(!0),Y(l[I])}),1)}),[r,I]),Object(a.useEffect)((function(){I===l.length&&setTimeout((function(){q(w(n.join(""))),g(!1)}),20)}),[I]);var Y=function(e){if(e){for(var a=[],c=0;c<4;c++)for(var i=0;i<8;i++)a.push({src:O(e,c,i),row:c,col:i});var r=document.getElementById("fetcher-pool");if(r){r.innerHTML="";var s=document.getElementById("fetcher-canvas"),m=s.getContext("2d"),d=0;!function c(){if(Q.parent.fetcherRunning)if(x(d),d++,a.length){var i=a.shift(),u=i.src,p=i.row,f=i.col,g=document.createElement("img");g.setAttribute("crossOrigin","Anonymous"),g.setAttribute("row",p),g.setAttribute("col",f),g.src=u,g.onload=function(){r.appendChild(g),c()},g.onerror=function(){M.danger("Network error, fetch TILE_"+d+" failed, refetching 2s later..",3e3),d--,a.unshift(i),setTimeout(c,2e3)}}else{r.querySelectorAll("img").forEach((function(e){var t=Number(e.getAttribute("row")),n=Number(e.getAttribute("col"));m.drawImage(e,512*n,512*t,512,512)}));var h=t.find((function(t){return t.id===e}));C(m,h);var E=s.toDataURL("image/jpeg",+N.get("PANO_SETTING_IMAGEQUALITY")),b=Object(W.a)(n);b.push(N.get("PANO_SETTING_INSERTEXIF")?k(E,h):E),o(b),setTimeout((function(){r.innerHTML="",I<l.length&&j(I+1)}),1)}}()}}},J=function(){Q.parent.fetcherRunning=!1,x(0),j(0),g(!1),o([]),s()},X=h.DateTime.fromJSDate(new Date).diff(h.DateTime.fromJSDate(new Date(L))).as("second"),$=32*l.length,ee=32*I+v+1,ne=X/ee*($-ee);return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ee.a,{icon:"error",intent:"danger",isOpen:F,cancelButtonText:"Cancel",onCancel:function(){G(!1)},confirmButtonText:"Sure",onConfirm:function(){J(),setTimeout((function(){G(!1)}),100)}},c.a.createElement("div",null,c.a.createElement("p",null,"Are you sure to close?"),c.a.createElement("p",{className:"text-gray-500 mt-2"},"When the Fetcher closed, the data fetched will be lost."))),c.a.createElement(fe.a,{title:"Fetcher",canEscapeKeyClose:!1,canOutsideClickClose:!1,isOpen:r,className:"bg-white",style:{width:512},onClose:function(){N.get("PANO_SETTING_USEALERT")?G(!0):J()}},c.a.createElement("div",{className:"fetcher-container w-full"},p&&n.length!==l.length?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"fetcher-canvas-container relative w-full overflow-hidden text-none"},c.a.createElement(Se,null),c.a.createElement("div",{id:"fetcher-pool",className:"relative z-10",style:{width:512,height:256}})),c.a.createElement("div",{className:"px-8 py-4"},c.a.createElement("p",{className:"mt-4 mb-2 text-xs text-gray-600 font-mono"},"Current: ",l[I],c.a.createElement("span",{className:"float-right"},"[",v,"/32]")),c.a.createElement(te.a,{value:v/32,intent:"success",animate:p}),c.a.createElement("p",{className:"mt-4 mb-2 text-xs text-gray-600 font-mono"},"Total:",c.a.createElement("span",{className:"float-right"},"[",I,"/",l.length,"]")),c.a.createElement(te.a,{value:(32*I+v)/(32*l.length),intent:"success",animate:p}),c.a.createElement("p",{className:"mt-4 mb-2 text-xs text-gray-600 font-mono"},"Rest:",c.a.createElement("span",{className:"float-right"},ne.toFixed(1),"s",ne>60?", about "+(ne/60).toFixed(0)+"min":"")))):c.a.createElement("div",{className:"p-4 pb-0 font-mono"},c.a.createElement(ve.a,{icon:"tick",intent:"success",title:"Fetching completed!",className:"mb-4"},c.a.createElement("div",{className:"text-right"},c.a.createElement(f.b,{loading:H,disabled:H,icon:"compressed",intent:"success",onClick:function(){Z(!0),setTimeout((function(){var e="Panoda_"+S(),t=new Oe.a,a=new Date,c=new Date(a.getTime()-6e4*a.getTimezoneOffset()),o=t.folder(e);n.forEach((function(e,t){o.file("PANODA_".concat(l[t],".jpg"),e.replace("data:image/jpeg;base64,",""),{base64:!0,date:c})})),t.generateAsync({type:"blob"}).then((function(t){saveAs(t,e+".zip")})),setTimeout((function(){Z(!1)}),1e3)}),50)}},"Download All (",U,")"))),l.map((function(e,t){var a=n[t];return c.a.createElement("div",{className:"my-1 p-2 rounded flex hover:bg-gray-100",key:t},c.a.createElement("div",{className:"text-gray-500"},t+1+"."),c.a.createElement("div",null,e),c.a.createElement("div",{className:"flex-grow text-right"},c.a.createElement("span",{className:"mr-4 text-gray-500"},w(a)),c.a.createElement(m.a,{minimal:!0,interactive:!0,intent:"success",onClick:function(){Ne.a.saveAs(a,"PANODA_".concat(e,".jpg"))}},"Download")))}))),c.a.createElement("canvas",{id:"fetcher-canvas",width:"4096",height:"2048",className:"hidden"}))))}function we(e){var t=e.panoView,n=e.setPanoView,o=e.panos,l=e.setPanos,r=e.setPanoFrom,s=e.checkedIds,m=e.setCheckedIds,d=e.setTabId,p=Object(a.useState)(!1),g=Object(i.a)(p,2),h=g[0],E=g[1],b=Object(a.useState)(!1),v=Object(i.a)(b,2),x=v[0],N=v[1],y=Object(a.useState)(!1),O=Object(i.a)(y,2),S=O[0],w=O[1],I=Object(a.useState)([]),k=Object(i.a)(I,2),C=k[0],j=k[1],T=Object(a.useState)(-1),A=Object(i.a)(T,2),L=A[0],D=A[1],_=Object(a.useState)(-1),R=Object(i.a)(_,2),F=R[0],G=R[1];Object(a.useEffect)((function(){if(-1!==F){var e=Math.min(L,F),t=Math.max(L,F);m(o.filter((function(n,a){return e<=a&&a<=t})).map((function(e){return e.id}))),D(-1),G(-1)}}),[L,F]);var B=o.map((function(e){return e.id}));return c.a.createElement("div",{className:"pano-top-bar"},c.a.createElement("div",{className:"mt-2"},c.a.createElement(u.a,null,c.a.createElement(f.b,{icon:"small-tick",disabled:0===o.length,onClick:function(){m(s.length<B.length?B:[])}}),c.a.createElement(f.b,{style:{minWidth:80,background:"#fff"},className:"text-xs"},s.length," / ",o.length),c.a.createElement(f.b,{icon:"sort-numerical",className:"px-4",onClick:function(){if(!(o.length<=1)){var e=Object(W.a)(o);l(e.sort((function(e,t){return e.id>t.id?1:-1}))),M.success("Sorted")}}}),c.a.createElement(ae.a,{position:"bottom",content:c.a.createElement(ce.a,{key:"menu"},c.a.createElement(oe.a,{title:"From"}),c.a.createElement(le.a,null),c.a.createElement(ie.a,{icon:"map-create",text:"Map",onClick:function(){r("map")}}),c.a.createElement(ie.a,{icon:"text-highlight",text:"Input",onClick:function(){r("input"),E(!0)}}))},c.a.createElement(f.b,{icon:"plus"},"Add"))),c.a.createElement(u.a,{className:"mx-4"},c.a.createElement(f.b,{icon:"play",intent:"success",disabled:0===s.length,onClick:function(){r(""),w(!0),Q.parent.fetcherRunning=!0}},"Fetch"),c.a.createElement(f.b,{icon:"duplicate",className:"px-4",disabled:0===s.length,onClick:function(){P(s.join(",")),M.success("Copy successfully")}}),c.a.createElement(f.b,{icon:"map-marker",className:"px-4",disabled:0===s.length,onClick:function(){Q.markPoints(o.filter((function(e){return s.includes(e.id)})))}}),c.a.createElement(f.b,{icon:"trash",className:"px-4",disabled:0===s.length,intent:"danger",onClick:function(){N(!0)}})),c.a.createElement(u.a,{className:"float-right"},c.a.createElement(f.b,{icon:"list",active:"list"===t,onClick:function(){n("list")}}),c.a.createElement(f.b,{icon:"grid-view",active:"grid"===t,onClick:function(){n("grid")}}))),c.a.createElement("div",{className:"pano-wrapper absolute bottom-0 w-full border-t ".concat("grid"===t?"flex flex-wrap content-start":"")},0===o.length&&c.a.createElement(se,null),o.map((function(e,n){return"list"===t?c.a.createElement(ue,{key:n,index:n,pano:e,panos:o,setPanos:l,checkedIds:s,setCheckedIds:m,shift1:L,shift2:F,setShift1:D,setShift2:G}):c.a.createElement(pe,{key:n,index:n,pano:e,panos:o,setPanos:l,checkedIds:s,setCheckedIds:m,shift1:L,shift2:F,setShift1:D,setShift2:G})}))),c.a.createElement(he,{isOpen:h,onClose:function(){E(!1)},setTabId:d}),c.a.createElement(be,{checkedIds:s,panos:o,setPanos:l,isOpen:x,onClose:function(){N(!1)}}),c.a.createElement(Pe,{panos:o,checkedIds:s,fetchResList:C,setFetchResList:j,isOpen:S,onClose:function(){w(!1)}}))}var Ie=n(173);function ke(){var e=N.get("PANO_SETTING_USEALERT"),t=Object(a.useState)(null!==e&&e),n=Object(i.a)(t,2),o=n[0],l=n[1],r=N.get("PANO_SETTING_INSERTEXIF"),s=Object(a.useState)(null!==r&&r),m=Object(i.a)(s,2),d=m[0],u=m[1],p=Object(a.useState)(N.get("PANO_SETTING_WATERMARK")||["1id","2position","3date","4rname","5link"]),f=Object(i.a)(p,2),g=f[0],h=f[1],E=Object(a.useState)(N.get("PANO_SETTING_IMAGEQUALITY")||".92"),b=Object(i.a)(E,2),v=b[0],x=b[1];return Object(a.useEffect)((function(){N.set("PANO_SETTING_USEALERT",o),N.set("PANO_SETTING_INSERTEXIF",d),N.set("PANO_SETTING_WATERMARK",g),N.set("PANO_SETTING_IMAGEQUALITY",v)}),[o,d,g,v]),c.a.createElement("div",null,c.a.createElement("div",{className:"flex border-b"},c.a.createElement("div",{className:"setting-left pt-4 pr-2"},c.a.createElement("p",{className:"text-base text-gray-800 font-light"},"Fetcher Alert"),c.a.createElement("p",{className:"text-sm text-gray-500 mt-2 leading-snug"},"Alert when you close fetcher.")),c.a.createElement("div",{className:"flex-grow bg-gray-100 pt-4 pb-1 pl-4"},c.a.createElement(me.c,{label:"Use alert",checked:o,onChange:function(){l(!o)}}))),c.a.createElement("div",{className:"flex border-b"},c.a.createElement("div",{className:"setting-left pt-4 pr-2"},c.a.createElement("p",{className:"text-base text-gray-800 font-light"},"EXIF"),c.a.createElement("p",{className:"text-sm text-gray-500 mt-2 leading-snug"},"Insert the\xa0",c.a.createElement(ae.a,{position:"top",interactionKind:"hover"},c.a.createElement("span",{className:"text-blue-500"}," info "),c.a.createElement("div",{className:"px-4 py-2"},c.a.createElement("code",{className:"text-xs text-gray-900"},"Artist: 'map.baidu.com'",c.a.createElement("br",null),"Software: 'Panoda - panoda.jisuowei.com'",c.a.createElement("br",null),"DateTime: [generated datetime]",c.a.createElement("br",null),"ImageDescription: [pano id]-[roadname]",c.a.createElement("br",null),"DateTimeOriginal: [pano date]",c.a.createElement("br",null),"GPSLongitudeRef: ['W' or 'E']",c.a.createElement("br",null),"GPSLongitude: [lng value]",c.a.createElement("br",null),"GPSLatitudeRef: ['S' or 'N']",c.a.createElement("br",null),"GPSLatitude: [lat value]",c.a.createElement("br",null)))),"\xa0into image file.")),c.a.createElement("div",{className:"flex-grow bg-gray-100 pt-4 pb-1 pl-4 pb-4"},c.a.createElement(me.c,{label:"Insert",checked:d,onChange:function(){u(!d)}}))),c.a.createElement("div",{className:"flex border-b"},c.a.createElement("div",{className:"setting-left pt-4 pr-2"},c.a.createElement("p",{className:"text-base text-gray-800 font-light"},"Watermark"),c.a.createElement("p",{className:"text-sm text-gray-500 mt-2 leading-snug"},"The pano info will be filled on the bottom-left of each generated pano image.")),c.a.createElement("div",{className:"flex-grow bg-gray-100 pt-4 pb-1 pl-4"},[{label:"Pano ID",value:"1id"},{label:"Position",value:"2position"},{label:"Date",value:"3date"},{label:"Road name",value:"4rname"},{label:"Panoda link",value:"5link"}].map((function(e){var t=e.label,n=e.value;return c.a.createElement(me.a,{key:n,label:t,value:n,checked:g.includes(n),onChange:function(e){var t=e.target.checked,a=Object(W.a)(g);t?a.push(n):a=a.filter((function(e){return e!==n})),h(a)}})})))),c.a.createElement("div",{className:"flex border-b"},c.a.createElement("div",{className:"setting-left pt-4 pr-2"},c.a.createElement("p",{className:"text-base text-gray-800 font-light"},"Image quality"),c.a.createElement("p",{className:"text-sm text-gray-500 mt-2 leading-snug"},"The quality of generated image.")),c.a.createElement("div",{className:"flex-grow bg-gray-100 pt-4 pb-1 pl-4"},c.a.createElement(Ie.a,{selectedValue:v,onChange:function(e){var t=e.target.value;x(t)}},c.a.createElement(me.b,{label:"High",value:".92"}),c.a.createElement(me.b,{label:"Middle",value:".64"}),c.a.createElement(me.b,{label:"Low",value:".46"})))))}var Ce=n(8),je=n(174);function Te(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){var e=document.getElementById("directory-file-input");e&&e.setAttribute("directory","true"),e&&e.setAttribute("webkitdirectory","true")}),[]),c.a.createElement("div",null,c.a.createElement("h3",{className:"pt-4 text-base font-light mb-2"},c.a.createElement(Ce.a,{icon:"console",className:"w-6"}),"Get pano id(s)"),c.a.createElement("div",{className:"pl-6 mb-4"},c.a.createElement("p",{className:"text-sm text-gray-500"},"1. From Baidu: copy the following code and paste it to the console of Baidu map.",c.a.createElement(m.a,{intent:"primary",interactive:!0,className:"float-right",onClick:function(){var e=document.getElementById("get-pano-id-code");e.select(),document.execCommand("Copy"),e.blur(),M.success("Copy successfully")}},"Copy")),c.a.createElement("textarea",{id:"get-pano-id-code",className:"mt-1 mb-3 w-full overflow-y-scroll p-2 rounded resize-none font-mono",style:{height:60,color:"#3ddc84",background:"#0a1d1a",fontSize:12},defaultValue:F}),c.a.createElement("p",{className:"text-sm text-gray-500"},"2. From folder: choose an existing folder contained with generated Panoda images."),c.a.createElement(je.a,{fill:!0,text:n||"Choose folder...",className:"mt-2 bp3-small",inputProps:{id:"directory-file-input",multiple:!0},hasSelection:""!==n,onInputChange:function(e){var t=e.target.files;if(t[0]){o("/"+t[0].webkitRelativePath.split("/")[0]);var n=Object(v.uniq)(Object.keys(t).map((function(e){var n=t[e].name.match(_);return n?n[0]:""})).filter(Boolean)),a=n.length;a?M.success(a+" pano id".concat(a>1?"s":""," matched."),1e4,void 0,{text:"Copy",icon:"duplicate",onClick:function(){P(n.join(","))}}):M.danger("No pano id matched.")}}})),c.a.createElement("h3",{className:"pt-4 text-base font-light mb-2"},c.a.createElement(Ce.a,{icon:"link",className:"w-6"}),"Thanks to"),c.a.createElement("div",{className:"pl-6 mb-4 pt-1"},[{label:"BaiduMap",link:"http://lbsyun.baidu.com"},{label:"Blueprint",link:"https://blueprintjs.com"},{label:"Tailwind",link:"https://next.tailwindcss.com"},{label:"JSZip",link:"https://github.com/Stuk/jszip"},{label:"FileSaver",link:"https://github.com/eligrey/FileSaver.js"},{label:"Piexifjs",link:"https://github.com/hMatoba/piexifjs"}].map((function(e,t){return c.a.createElement(m.a,{minimal:!0,interactive:!0,key:t,intent:"primary",className:"mr-2",onClick:function(){window.open(e.link)}},e.label)}))),c.a.createElement("p",{className:"absolute bottom-0 w-full py-4 text-xs text-gray-600 border-t bg-white"},"Panoda - http://p.jsw.im",c.a.createElement("span",{className:"float-right text-blue-500 cursor-pointer",onClick:function(){window.open("http://jisuowei.com")}},"\xa9 jisuowei.com")))}function Ae(e){var t=e.isOpen,n=e.onClose;return c.a.createElement(fe.a,{isOpen:t,title:"Demo Video",className:"p-0 overflow-hidden",style:{width:640},onClose:n},c.a.createElement("div",null,c.a.createElement("iframe",{title:"demo video",src:"//player.bilibili.com/player.html?aid=69382774&cid=120251707&page=1",style:{width:640,height:430},scrolling:"no"})))}var Le=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)("pano"),m=Object(i.a)(l,2),d=m[0],u=m[1],p=Object(a.useState)(""),f=Object(i.a)(p,2),g=f[0],h=f[1],E=Object(a.useState)("point"),b=Object(i.a)(E,2),v=b[0],x=b[1],y=Object(a.useState)([]),O=Object(i.a)(y,2),S=O[0],P=O[1],w=Object(a.useState)({lng:0,lat:0}),I=Object(i.a)(w,2),k=I[0],C=I[1],j=Object(a.useState)(14),T=Object(i.a)(j,2),A=T[0],L=T[1],D=Object(a.useState)(N.get("PANODA_PANO_VIEW")||"list"),_=Object(i.a)(D,2),R=_[0],F=_[1],G=Object(a.useState)(N.get("PANODA_PANOS")||[]),B=Object(i.a)(G,2),M=B[0],W=B[1],z=Object(a.useState)(N.get("PANODA_CHECKED_IDS")||[]),H=Object(i.a)(z,2),Z=H[0],V=H[1],K=Object(a.useState)(!1),U=Object(i.a)(K,2),q=U[0],Y=U[1];Q.parent.setLoading=o,Q.parent.panos=M,Q.parent.setPanos=W,Q.parent.setSameRoadPanos=P,Q.parent.setAreaCenter=C,Q.parent.setZoomLevel=L;return Object(a.useEffect)((function(){Q.init(),N.get("PANO_SETTING_SET")||(N.set("PANO_SETTING_SET",!0),N.set("PANO_SETTING_USEALERT",!0),N.set("PANO_SETTING_INSERTEXIF",!0),N.set("PANO_SETTING_WATERMARK",["1id","2position","3date","4rname","5link"]),N.set("PANO_SETTING_IMAGEQUALITY",".92"))}),[]),Object(a.useEffect)((function(){h("")}),[d]),Object(a.useEffect)((function(){P([]),"map"===g?Q.listen(v):Q.unlisten(),Q.clear()}),[g,v]),Object(a.useEffect)((function(){C({lng:0,lat:0})}),[v]),Object(a.useEffect)((function(){N.set("PANODA_PANO_VIEW",R)}),[R]),Object(a.useEffect)((function(){N.set("PANODA_PANOS",M);var e=M.map((function(e){return e.id})),t=Z.filter((function(t){return e.includes(t)}));V(t)}),[M]),Object(a.useEffect)((function(){N.set("PANODA_CHECKED_IDS",Z)}),[Z]),c.a.createElement("div",{className:"panoda-container \n      ".concat("map"===g?"map-expand":""," \n      w-full h-full absolute top-0 right-0 bottom-0 left-0")},c.a.createElement("div",{className:"panoda-map absolute top-0 right-50 bottom-0 left-0"},c.a.createElement("div",{id:"map",className:"absolute top-0 right-0 bottom-0 left-0"}),c.a.createElement($,{loading:n,panoFrom:g,setPanoFrom:h,selectWith:v,setSelectWith:x,sameRoadPanos:S,setSameRoadPanos:P,areaCenter:k,zoomLevel:A})),c.a.createElement("div",{className:"panoda-panel absolute top-0 right-0 bottom-0 left-50 px-10 shadow-md"},c.a.createElement("div",{className:"panel-inner relative h-full"},c.a.createElement(ee,{openVideo:function(){Y(!0)}}),c.a.createElement(r.a,{large:!0,animate:!0,className:"border-b",id:"navi",key:"horizontal",selectedTabId:d,onChange:function(e){u(e)}},c.a.createElement(s.a,{id:"pano",title:"Pano"}),c.a.createElement(s.a,{id:"setting",title:"Setting"}),c.a.createElement(s.a,{id:"about",title:"About"})),[c.a.createElement(we,{panoView:R,setPanoView:F,panos:M,setPanos:W,setPanoFrom:h,checkedIds:Z,setCheckedIds:V,setTabId:u}),c.a.createElement(ke,null),c.a.createElement(Te,null)][["pano","setting","about"].indexOf(d)])),c.a.createElement(Ae,{isOpen:q,onClose:function(){Y(!1)}}),c.a.createElement(ne,{loading:n}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(Le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},92:function(e,t,n){e.exports=n.p+"static/media/pin.391098f4.svg"},93:function(e,t,n){e.exports=n.p+"static/media/rect.22c89e3f.svg"}},[[107,1,2]]]);